<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="426px" preserveAspectRatio="none" style="width:905px;height:426px;" version="1.1" viewBox="0 0 905 426" width="905px" zoomAndPan="magnify"><defs><filter height="300%" id="fgnxpwm88t04p" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="336" x="282.5" y="16.708">client-go.tools.cache.ThreadSafeStore</text><!--class ThreadSafeStore--><rect fill="#FEFECE" filter="url(#fgnxpwm88t04p)" height="227.2656" id="ThreadSafeStore" style="stroke: #A80036; stroke-width: 1.5;" width="364" x="6" y="28.9531"/><ellipse cx="130.75" cy="44.9531" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M131.7031,41.7344 L131.7031,48.25 L133.4219,48.25 C133.875,48.25 134.0156,48.2813 134.1875,48.4063 C134.4219,48.5781 134.5313,48.8281 134.5313,49.1094 C134.5313,49.6719 134.1719,49.9531 133.4219,49.9531 L128.2813,49.9531 C127.875,49.9531 127.6719,49.9063 127.5156,49.7813 C127.2969,49.625 127.1563,49.3594 127.1563,49.1094 C127.1563,48.8125 127.3125,48.5313 127.5625,48.375 C127.7188,48.2656 127.8438,48.25 128.2813,48.25 L130,48.25 L130,41.7344 L128.2813,41.7344 C127.8594,41.7344 127.6719,41.7031 127.5156,41.5938 C127.2969,41.4219 127.1563,41.1719 127.1563,40.8906 C127.1563,40.6094 127.3125,40.3125 127.5625,40.1563 C127.7188,40.0625 127.8438,40.0469 128.2813,40.0469 L133.4219,40.0469 C133.875,40.0469 134.0156,40.0781 134.1875,40.1875 C134.4219,40.3594 134.5313,40.625 134.5313,40.8906 C134.5313,41.1875 134.3906,41.4688 134.125,41.625 C134,41.7031 133.8125,41.7344 133.4219,41.7344 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="106" x="151.25" y="49.1074">ThreadSafeStore</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="369" y1="60.9531" y2="60.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="369" y1="68.9531" y2="68.9531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="178" x="12" y="83.1636">Add(key string, obj interface{})</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="197" x="12" y="95.9683">Update(key string, obj interface{})</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="100" x="12" y="108.7729">Delete(key string)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="259" x="12" y="121.5776">Get(key string) (item interface{}, exists bool)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="104" x="12" y="134.3823">List() []interface{}</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="100" x="12" y="147.187">ListKeys() []string</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="223" x="12" y="159.9917">Replace(map[string]interface{}, string)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="352" x="12" y="172.7964">Index(indexName string, obj interface{}) ([]interface{}, error)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="313" x="12" y="185.6011">IndexKeys(indexName, indexKey string) ([]string, error)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="236" x="12" y="198.4058">ListIndexFuncValues(name string) []string</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="331" x="12" y="211.2104">ByIndex(indexName, indexKey string) ([]interface{}, error)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="130" x="12" y="224.0151">GetIndexers() Indexers</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="236" x="12" y="236.8198">AddIndexers(newIndexers Indexers) error</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="81" x="12" y="249.6245">Resync() error</text><!--class Indexers--><rect fill="#FEFECE" filter="url(#fgnxpwm88t04p)" height="48" id="Indexers" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="405.5" y="118.4531"/><ellipse cx="420.5" cy="134.4531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M422.8438,130.125 L423.0156,130.2031 C423.2344,129.8906 423.4375,129.7969 423.7344,129.7969 C424.0313,129.7969 424.3125,129.9375 424.4688,130.2031 C424.5625,130.3594 424.5781,130.4844 424.5781,130.9219 L424.5781,132.3438 C424.5781,132.7656 424.5469,132.9531 424.4375,133.1094 C424.2656,133.3281 424,133.4688 423.7344,133.4688 C423.5156,133.4688 423.2813,133.3594 423.1406,133.2188 C423,133.0938 422.9688,132.9688 422.9063,132.5625 C422.8125,132.1563 422.6406,131.9375 422.1563,131.6563 C421.6875,131.4063 421.0781,131.25 420.5,131.25 C418.7656,131.25 417.5156,132.5625 417.5156,134.3438 L417.5156,135.4375 C417.5156,137.1406 418.8125,138.2344 420.8594,138.2344 C421.625,138.2344 422.3125,138.1094 422.7344,137.8438 C422.9219,137.75 422.9219,137.75 423.375,137.2656 C423.5625,137.0781 423.7656,137 423.9844,137 C424.4531,137 424.8438,137.3906 424.8438,137.8438 C424.8438,138.2344 424.5156,138.6875 423.9375,139.0938 C423.1875,139.6406 422.0313,139.9375 420.8125,139.9375 C417.9219,139.9375 415.8125,138.0469 415.8125,135.4688 L415.8125,134.3438 C415.8125,131.625 417.8125,129.5469 420.4375,129.5469 C421.3125,129.5469 421.9063,129.6875 422.8438,130.125 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="53" x="434.5" y="138.6074">Indexers</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="406.5" x2="489.5" y1="150.4531" y2="150.4531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="406.5" x2="489.5" y1="158.4531" y2="158.4531"/><!--class threadSafeMap--><rect fill="#FEFECE" filter="url(#fgnxpwm88t04p)" height="99.2188" id="threadSafeMap" style="stroke: #A80036; stroke-width: 1.5;" width="192" x="304" y="315.9531"/><ellipse cx="347.8" cy="331.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M350.1438,327.625 L350.3156,327.7031 C350.5344,327.3906 350.7375,327.2969 351.0344,327.2969 C351.3313,327.2969 351.6125,327.4375 351.7688,327.7031 C351.8625,327.8594 351.8781,327.9844 351.8781,328.4219 L351.8781,329.8438 C351.8781,330.2656 351.8469,330.4531 351.7375,330.6094 C351.5656,330.8281 351.3,330.9688 351.0344,330.9688 C350.8156,330.9688 350.5813,330.8594 350.4406,330.7188 C350.3,330.5938 350.2688,330.4688 350.2063,330.0625 C350.1125,329.6563 349.9406,329.4375 349.4563,329.1563 C348.9875,328.9063 348.3781,328.75 347.8,328.75 C346.0656,328.75 344.8156,330.0625 344.8156,331.8438 L344.8156,332.9375 C344.8156,334.6406 346.1125,335.7344 348.1594,335.7344 C348.925,335.7344 349.6125,335.6094 350.0344,335.3438 C350.2219,335.25 350.2219,335.25 350.675,334.7656 C350.8625,334.5781 351.0656,334.5 351.2844,334.5 C351.7531,334.5 352.1438,334.8906 352.1438,335.3438 C352.1438,335.7344 351.8156,336.1875 351.2375,336.5938 C350.4875,337.1406 349.3313,337.4375 348.1125,337.4375 C345.2219,337.4375 343.1125,335.5469 343.1125,332.9688 L343.1125,331.8438 C343.1125,329.125 345.1125,327.0469 347.7375,327.0469 C348.6125,327.0469 349.2063,327.1875 350.1438,327.625 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="96" x="368.2" y="336.1074">threadSafeMap</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="305" x2="495" y1="347.9531" y2="347.9531"/><ellipse cx="315" cy="359.8555" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="118" x="324" y="362.1636">lock  +sync.RWMutex</text><ellipse cx="315" cy="372.6602" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="166" x="324" y="374.9683">items map[string]interface{}</text><ellipse cx="315" cy="385.4648" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="102" x="324" y="387.7729">indexers Indexers</text><ellipse cx="315" cy="398.2695" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="84" x="324" y="400.5776">indices Indices</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="305" x2="495" y1="407.1719" y2="407.1719"/><!--class Indices--><rect fill="#FEFECE" filter="url(#fgnxpwm88t04p)" height="48" id="Indices" style="stroke: #A80036; stroke-width: 1.5;" width="76" x="574" y="118.4531"/><ellipse cx="589" cy="134.4531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M591.3438,130.125 L591.5156,130.2031 C591.7344,129.8906 591.9375,129.7969 592.2344,129.7969 C592.5313,129.7969 592.8125,129.9375 592.9688,130.2031 C593.0625,130.3594 593.0781,130.4844 593.0781,130.9219 L593.0781,132.3438 C593.0781,132.7656 593.0469,132.9531 592.9375,133.1094 C592.7656,133.3281 592.5,133.4688 592.2344,133.4688 C592.0156,133.4688 591.7813,133.3594 591.6406,133.2188 C591.5,133.0938 591.4688,132.9688 591.4063,132.5625 C591.3125,132.1563 591.1406,131.9375 590.6563,131.6563 C590.1875,131.4063 589.5781,131.25 589,131.25 C587.2656,131.25 586.0156,132.5625 586.0156,134.3438 L586.0156,135.4375 C586.0156,137.1406 587.3125,138.2344 589.3594,138.2344 C590.125,138.2344 590.8125,138.1094 591.2344,137.8438 C591.4219,137.75 591.4219,137.75 591.875,137.2656 C592.0625,137.0781 592.2656,137 592.4844,137 C592.9531,137 593.3438,137.3906 593.3438,137.8438 C593.3438,138.2344 593.0156,138.6875 592.4375,139.0938 C591.6875,139.6406 590.5313,139.9375 589.3125,139.9375 C586.4219,139.9375 584.3125,138.0469 584.3125,135.4688 L584.3125,134.3438 C584.3125,131.625 586.3125,129.5469 588.9375,129.5469 C589.8125,129.5469 590.4063,129.6875 591.3438,130.125 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="44" x="603" y="138.6074">Indices</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="575" x2="649" y1="150.4531" y2="150.4531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="575" x2="649" y1="158.4531" y2="158.4531"/><polygon fill="#FBFB77" filter="url(#fgnxpwm88t04p)" points="531,329.9531,531,400.4844,883,400.4844,883,339.9531,873,329.9531,531,329.9531" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FBFB77" points="531,329.9531,531,400.4844,883,400.4844,883,339.9531,873,329.9531,696.028,329.9531,621.987,166.6861,688.028,329.9531,531,329.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="873" x2="873" y1="329.9531" y2="339.9531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="883" x2="873" y1="339.9531" y2="339.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="537" y="347.02">type Index map[string]sets.String</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="537" y="362.1528">type Indices map[string]Index</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="229" x="537" y="377.2856">type Indexers map[string]IndexFunc</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="331" x="537" y="392.4185">type IndexFunc func(obj interface{}) ([]string, error)</text><!--link ThreadSafeStore to Indexers--><path d="M370.051,142.4531 C380.077,142.4531 390.103,142.4531 400.129,142.4531 " fill="none" id="ThreadSafeStore-Indexers" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="405.372,142.4531,396.372,138.4531,400.372,142.4531,396.372,146.4531,405.372,142.4531" style="stroke: #A80036; stroke-width: 1.0;"/><!--link ThreadSafeStore to threadSafeMap--><path d="M310.259,270.9021 C325.496,286.7871 340.275,302.1921 353.294,315.7641 " fill="none" id="ThreadSafeStore-threadSafeMap" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="304.967,275.4981,296.174,256.2191,315.07,265.8061,304.967,275.4981" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Indexers to threadSafeMap--><path d="M442.954,166.6861 C436.009,198.6611 423.251,257.3991 413.437,302.5851 " fill="none" id="Indexers-threadSafeMap" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#FFFFFF" points="410.626,315.5314,415.8081,310.5168,413.1723,303.8047,407.9902,308.8193,410.626,315.5314" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Indices to threadSafeMap--><path d="M591.131,166.5231 C570.305,189.4271 537.277,225.4341 508,255.9531 C492.081,272.5471 474.587,290.3181 458.4,306.5741 " fill="none" id="Indices-threadSafeMap" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#FFFFFF" points="449.042,315.9508,456.1116,314.5295,457.5187,307.457,450.4491,308.8783,449.042,315.9508" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml
title client-go.tools.cache.ThreadSafeStore

interface ThreadSafeStore {
  Add(key string, obj interface{})
  Update(key string, obj interface{})
  Delete(key string)
  Get(key string) (item interface{}, exists bool)
  List() []interface{}
  ListKeys() []string
  Replace(map[string]interface{}, string)
  Index(indexName string, obj interface{}) ([]interface{}, error)
  IndexKeys(indexName, indexKey string) ([]string, error)
  ListIndexFuncValues(name string) []string
  ByIndex(indexName, indexKey string) ([]interface{}, error)
  GetIndexers() Indexers
  AddIndexers(newIndexers Indexers) error
  Resync() error
}
ThreadSafeStore .> Indexers

class threadSafeMap {
  +lock  +sync.RWMutex
  +items map[string]interface{}
  +indexers Indexers
  +indices Indices
}
ThreadSafeStore <|.. threadSafeMap
Indexers ..o threadSafeMap
Indices ..o threadSafeMap

note bottom of Indices
type Index map[string]sets.String
type Indices map[string]Index
type Indexers map[string]IndexFunc
type IndexFunc func(obj interface{}) ([]string, error)
end note
@enduml

PlantUML version 1.2017.16beta5(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_25-b15
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>