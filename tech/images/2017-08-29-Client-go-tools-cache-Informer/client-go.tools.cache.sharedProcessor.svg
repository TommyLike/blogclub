<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="328px" preserveAspectRatio="none" style="width:525px;height:328px;" version="1.1" viewBox="0 0 525 328" width="525px" zoomAndPan="magnify"><defs><filter height="300%" id="f9clzss7stw72" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--class sharedProcessor--><rect fill="#FEFECE" filter="url(#f9clzss7stw72)" height="112.0234" id="sharedProcessor" style="stroke: #A80036; stroke-width: 1.5;" width="244" x="270" y="8"/><ellipse cx="334.25" cy="24" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M336.5938,19.6719 L336.7656,19.75 C336.9844,19.4375 337.1875,19.3438 337.4844,19.3438 C337.7813,19.3438 338.0625,19.4844 338.2188,19.75 C338.3125,19.9063 338.3281,20.0313 338.3281,20.4688 L338.3281,21.8906 C338.3281,22.3125 338.2969,22.5 338.1875,22.6563 C338.0156,22.875 337.75,23.0156 337.4844,23.0156 C337.2656,23.0156 337.0313,22.9063 336.8906,22.7656 C336.75,22.6406 336.7188,22.5156 336.6563,22.1094 C336.5625,21.7031 336.3906,21.4844 335.9063,21.2031 C335.4375,20.9531 334.8281,20.7969 334.25,20.7969 C332.5156,20.7969 331.2656,22.1094 331.2656,23.8906 L331.2656,24.9844 C331.2656,26.6875 332.5625,27.7813 334.6094,27.7813 C335.375,27.7813 336.0625,27.6563 336.4844,27.3906 C336.6719,27.2969 336.6719,27.2969 337.125,26.8125 C337.3125,26.625 337.5156,26.5469 337.7344,26.5469 C338.2031,26.5469 338.5938,26.9375 338.5938,27.3906 C338.5938,27.7813 338.2656,28.2344 337.6875,28.6406 C336.9375,29.1875 335.7813,29.4844 334.5625,29.4844 C331.6719,29.4844 329.5625,27.5938 329.5625,25.0156 L329.5625,23.8906 C329.5625,21.1719 331.5625,19.0938 334.1875,19.0938 C335.0625,19.0938 335.6563,19.2344 336.5938,19.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="107" x="354.75" y="28.1543">sharedProcessor</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="271" x2="513" y1="40" y2="40"/><ellipse cx="281" cy="51.9023" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="170" x="290" y="54.2104">listenersLock    sync.RWMutex</text><ellipse cx="281" cy="64.707" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="200" x="290" y="67.0151">listeners        []*processorListener</text><ellipse cx="281" cy="77.5117" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="218" x="290" y="79.8198">syncingListeners []*processorListener</text><ellipse cx="281" cy="90.3164" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="138" x="290" y="92.6245">clock            clock.Clock</text><ellipse cx="281" cy="103.1211" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="138" x="290" y="105.4292">wg               wait.Group</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="271" x2="513" y1="112.0234" y2="112.0234"/><!--class processorListener--><rect fill="#FEFECE" filter="url(#f9clzss7stw72)" height="137.6328" id="processorListener" style="stroke: #A80036; stroke-width: 1.5;" width="241" x="271.5" y="180"/><ellipse cx="331.25" cy="196" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M333.5938,191.6719 L333.7656,191.75 C333.9844,191.4375 334.1875,191.3438 334.4844,191.3438 C334.7813,191.3438 335.0625,191.4844 335.2188,191.75 C335.3125,191.9063 335.3281,192.0313 335.3281,192.4688 L335.3281,193.8906 C335.3281,194.3125 335.2969,194.5 335.1875,194.6563 C335.0156,194.875 334.75,195.0156 334.4844,195.0156 C334.2656,195.0156 334.0313,194.9063 333.8906,194.7656 C333.75,194.6406 333.7188,194.5156 333.6563,194.1094 C333.5625,193.7031 333.3906,193.4844 332.9063,193.2031 C332.4375,192.9531 331.8281,192.7969 331.25,192.7969 C329.5156,192.7969 328.2656,194.1094 328.2656,195.8906 L328.2656,196.9844 C328.2656,198.6875 329.5625,199.7813 331.6094,199.7813 C332.375,199.7813 333.0625,199.6563 333.4844,199.3906 C333.6719,199.2969 333.6719,199.2969 334.125,198.8125 C334.3125,198.625 334.5156,198.5469 334.7344,198.5469 C335.2031,198.5469 335.5938,198.9375 335.5938,199.3906 C335.5938,199.7813 335.2656,200.2344 334.6875,200.6406 C333.9375,201.1875 332.7813,201.4844 331.5625,201.4844 C328.6719,201.4844 326.5625,199.5938 326.5625,197.0156 L326.5625,195.8906 C326.5625,193.1719 328.5625,191.0938 331.1875,191.0938 C332.0625,191.0938 332.6563,191.2344 333.5938,191.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="113" x="351.75" y="200.1543">processorListener</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="272.5" x2="511.5" y1="212" y2="212"/><ellipse cx="282.5" cy="223.9023" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="138" x="291.5" y="226.2104">nextCh chan interface{}</text><ellipse cx="282.5" cy="236.707" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="139" x="291.5" y="239.0151">addCh  chan interface{}</text><ellipse cx="282.5" cy="249.5117" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="175" x="291.5" y="251.8198">handler ResourceEventHandler</text><ellipse cx="282.5" cy="262.3164" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="215" x="291.5" y="264.6245">requestedResyncPeriod time.Duration</text><ellipse cx="282.5" cy="275.1211" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="155" x="291.5" y="277.4292">resyncPeriod time.Duration</text><ellipse cx="282.5" cy="287.9258" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="125" x="291.5" y="290.2339">nextResync time.Time</text><ellipse cx="282.5" cy="300.7305" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="130" x="291.5" y="303.0386">resyncLock sync.Mutex</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="272.5" x2="511.5" y1="309.6328" y2="309.6328"/><!--class ResourceEventHandler--><rect fill="#FEFECE" filter="url(#f9clzss7stw72)" height="86.4141" id="ResourceEventHandler" style="stroke: #A80036; stroke-width: 1.5;" width="230" x="6" y="206"/><ellipse cx="46.2" cy="222" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M47.1531,218.7813 L47.1531,225.2969 L48.8719,225.2969 C49.325,225.2969 49.4656,225.3281 49.6375,225.4531 C49.8719,225.625 49.9813,225.875 49.9813,226.1563 C49.9813,226.7188 49.6219,227 48.8719,227 L43.7313,227 C43.325,227 43.1219,226.9531 42.9656,226.8281 C42.7469,226.6719 42.6063,226.4063 42.6063,226.1563 C42.6063,225.8594 42.7625,225.5781 43.0125,225.4219 C43.1688,225.3125 43.2938,225.2969 43.7313,225.2969 L45.45,225.2969 L45.45,218.7813 L43.7313,218.7813 C43.3094,218.7813 43.1219,218.75 42.9656,218.6406 C42.7469,218.4688 42.6063,218.2188 42.6063,217.9375 C42.6063,217.6563 42.7625,217.3594 43.0125,217.2031 C43.1688,217.1094 43.2938,217.0938 43.7313,217.0938 L48.8719,217.0938 C49.325,217.0938 49.4656,217.125 49.6375,217.2344 C49.8719,217.4063 49.9813,217.6719 49.9813,217.9375 C49.9813,218.2344 49.8406,218.5156 49.575,218.6719 C49.45,218.75 49.2625,218.7813 48.8719,218.7813 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="142" x="65.8" y="226.1543">ResourceEventHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="235" y1="238" y2="238"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="235" y1="246" y2="246"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="130" x="12" y="260.2104">OnAdd(obj interface{})</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="218" x="12" y="273.0151">OnUpdate(oldObj, newObj interface{})</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="145" x="12" y="285.8198">OnDelete(obj interface{})</text><!--link sharedProcessor to processorListener--><path d="M392,133.454 C392,148.623 392,164.695 392,179.851 " fill="none" id="sharedProcessor-processorListener" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#FFFFFF" points="392,120.403,388,126.403,392,132.403,396,126.403,392,120.403" style="stroke: #A80036; stroke-width: 1.0;"/><!--link ResourceEventHandler to processorListener--><path d="M236.122,249 C243.48,249 250.837,249 258.195,249 " fill="none" id="ResourceEventHandler-processorListener" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#FFFFFF" points="271.438,249,265.438,245,259.438,249,265.438,253,271.438,249" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml
class sharedProcessor {
  +listenersLock    sync.RWMutex
  +listeners        []*processorListener
  +syncingListeners []*processorListener
  +clock            clock.Clock
  +wg               wait.Group
}
sharedProcessor o.. processorListener

interface ResourceEventHandler {
  OnAdd(obj interface{})
  OnUpdate(oldObj, newObj interface{})
  OnDelete(obj interface{})
}

class processorListener {
  +nextCh chan interface{}
  +addCh  chan interface{}
  +handler ResourceEventHandler
  +requestedResyncPeriod time.Duration
  +resyncPeriod time.Duration
  +nextResync time.Time
  +resyncLock sync.Mutex
}
processorListener o.left. ResourceEventHandler
@enduml

PlantUML version 1.2017.16beta5(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_25-b15
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>